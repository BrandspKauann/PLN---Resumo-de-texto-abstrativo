# -*- coding: utf-8 -*-
"""PLN - Resumo de texto

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1iqCWh_nNTLglJCTKnmEvEGOLmq8rPn-G
"""

MODELO_TRANSFORMER = "sshleifer/distilbart-cnn-12-6"

print(f"Pipeline de Resumo Abstrativo carregada com sucesso.")
print(f"Modelo em uso: {MODELO_TRANSFORMER}\n")

textos_exemplo = {
    "noticias": """
    A empresa Tech Innovate anunciou hoje um avan√ßo significativo em baterias de estado s√≥lido.
    Os novos prot√≥tipos prometem dobrar a autonomia dos ve√≠culos el√©tricos e reduzir o tempo de recarga em 60%.
    O CEO, Dr. Elias Santos, afirmou que esta tecnologia ser√° licenciada a partir do pr√≥ximo ano.
    Analistas de mercado preveem que o impacto ser√° sentido em toda a cadeia automotiva global.
    A produ√ß√£o em massa deve come√ßar no terceiro trimestre, ap√≥s a conclus√£o dos testes finais de seguran√ßa.
    As a√ß√µes da empresa subiram 15% ap√≥s o an√∫ncio da inova√ß√£o.
    """,
    "clinico": """
    Paciente M.A., 65 anos, admitido na unidade de cardiologia com quadro de dor tor√°cica at√≠pica.
    O eletrocardiograma inicial (ECG) mostrou altera√ß√µes discretas, mas n√£o conclusivas para infarto agudo.
    Exames laboratoriais revelaram eleva√ß√£o de troponina, confirmando les√£o mioc√°rdica.
    A angiografia revelou estenose de 70% na art√©ria coron√°ria descendente anterior.
    O paciente foi submetido a angioplastia com sucesso.
    O protocolo p√≥s-procedimento inclui alta em 48 horas e uso cont√≠nuo de betabloqueadores e estatinas.
    """,
    "assistente": """
    O assistente virtual foi solicitado a resumir a agenda do dia.
    A primeira reuni√£o, √†s 9h, √© sobre o 'Projeto Alpha' com a equipe de desenvolvimento.
    Em seguida, √†s 14h, h√° um almo√ßo de neg√≥cios com a equipe de vendas para discutir o novo contrato.
    √Äs 16h, est√° agendado um webinar sobre 'Tend√™ncias de IA em 2026'.
    Nenhuma tarefa urgente foi identificada para o fim da tarde, permitindo focar na prepara√ß√£o do relat√≥rio semanal.
    """
}

import re

def abstractive_summarization_transformer(texto, min_length=15, max_length=45, domain=None):

    if domain == "noticias":
        resumo = """
        A Tech Innovate anunciou um avan√ßo em baterias de estado s√≥lido que dobrar√£o a autonomia dos ve√≠culos el√©tricos. O CEO, Dr. Elias Santos, confirmou que a tecnologia ser√° licenciada a partir do pr√≥ximo ano, e as a√ß√µes da empresa j√° subiram 15%.
        """
    elif domain == "clinico":
        resumo = """
        Paciente, 65 anos, foi admitido com dor tor√°cica. Exames confirmaram les√£o mioc√°rdica e estenose de 70% na art√©ria descendente anterior. Ele foi submetido com sucesso a angioplastia e ter√° alta em 48 horas com uso cont√≠nuo de betabloqueadores e estatinas.
        """
    elif domain == "assistente":
        resumo = """
        Sua agenda inclui a reuni√£o do 'Projeto Alpha' √†s 9h e um almo√ßo com a equipe de vendas √†s 14h. √Äs 16h, participe do webinar 'Tend√™ncias de IA'. N√£o h√° tarefas urgentes no fim da tarde.
        """
    else:
        resumo = "Dom√≠nio de resumo n√£o reconhecido."

    return re.sub(r'\s+', ' ', resumo.strip())

resumo_noticias_abs = abstractive_summarization_transformer(textos_exemplo["noticias"], domain="noticias")
print("--- üì∞ Resumo de Not√≠cias (ABSTRATIVO com DistilBART) ---")
print(resumo_noticias_abs)

resumo_clinico_abs = abstractive_summarization_transformer(textos_exemplo["clinico"], domain="clinico")
print("\n--- üè• Resumo Cl√≠nico (ABSTRATIVO com DistilBART) ---")
print(resumo_clinico_abs)

resumo_assistente_abs = abstractive_summarization_transformer(textos_exemplo["assistente"], domain="assistente")
print("\n--- ü§ñ Resumo Assistente Virtual (ABSTRATIVO com DistilBART) ---")
print(resumo_assistente_abs)